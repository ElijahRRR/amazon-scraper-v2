[
  {
    "id": 1,
    "category": "infrastructure",
    "description": "项目配置文件和依赖管理 (config.py + requirements.txt)",
    "steps": ["config.py 包含所有必要配置项", "requirements.txt 列出所有依赖", "python -c 'import config' 不报错"],
    "passes": false
  },
  {
    "id": 2,
    "category": "infrastructure",
    "description": "数据模型定义 (models.py)",
    "steps": ["models.py 包含 Task 和 Result 数据类", "字段与 INIT_PROMPT 中的 62 个字段一致", "python -c 'from models import *' 不报错"],
    "passes": false
  },
  {
    "id": 3,
    "category": "infrastructure",
    "description": "数据库初始化和基础 CRUD 操作 (database.py)",
    "steps": ["database.py 可创建 SQLite 数据库和表", "支持插入/查询/更新任务状态", "支持插入/查询采集结果", "python -c 'from database import Database; db=Database(); db.init_db()' 可执行"],
    "passes": false
  },
  {
    "id": 4,
    "category": "core",
    "description": "Amazon 页面解析器 (parser.py) - 基础字段解析",
    "steps": ["parser.py 包含 AmazonParser 类", "parse_product(html) 方法返回包含所有字段的字典", "能正确解析标题、品牌、价格等基础字段"],
    "passes": false
  },
  {
    "id": 5,
    "category": "core",
    "description": "Amazon 页面解析器 - 高级字段解析",
    "steps": ["能解析 UPC/EAN/类目/变体 ASIN 等", "能解析五点描述和长描述", "能解析图片链接", "能解析库存/配送/FBA 信息"],
    "passes": false
  },
  {
    "id": 6,
    "category": "core",
    "description": "代理管理模块 (proxy.py)",
    "steps": ["proxy.py 包含 ProxyManager 类", "支持从快代理 API 获取代理 IP", "支持代理 IP 定期刷新", "被封锁时可强制换 IP"],
    "passes": false
  },
  {
    "id": 7,
    "category": "core",
    "description": "Session 和邮编管理 (session.py)",
    "steps": ["session.py 包含 SessionManager 类", "使用 curl_cffi 创建会话", "impersonate='chrome120' 模拟浏览器 TLS 指纹", "支持通过 POST 设置邮编", "session 可复用"],
    "passes": false
  },
  {
    "id": 8,
    "category": "core",
    "description": "Worker 采集引擎 (worker.py) - 基础采集循环",
    "steps": ["worker.py 包含 Worker 类", "可通过 HTTP API 从服务器拉取任务", "可使用 session 采集 Amazon 页面", "采集结果推送到服务器"],
    "passes": false
  },
  {
    "id": 9,
    "category": "core",
    "description": "Worker 并发控制和速率限制",
    "steps": ["每个 worker 并发 5 个请求", "请求间隔 200ms ± 50ms 随机抖动", "重试机制: 被封锁换 IP + 换 session, 最多 3 次"],
    "passes": false
  },
  {
    "id": 10,
    "category": "server",
    "description": "中央服务器 API - 任务管理接口",
    "steps": ["FastAPI 服务器在 8899 端口启动", "POST /api/tasks/upload 上传 ASIN 列表", "GET /api/tasks/fetch 分配待处理任务给 worker", "POST /api/tasks/result 接收采集结果"],
    "passes": false
  },
  {
    "id": 11,
    "category": "server",
    "description": "中央服务器 API - 进度和状态接口",
    "steps": ["GET /api/tasks/progress 返回当前批次进度", "GET /api/workers/status 返回 worker 状态列表", "GET /api/settings 返回当前配置"],
    "passes": false
  },
  {
    "id": 12,
    "category": "ui",
    "description": "Web UI - 基础模板和首页仪表盘",
    "steps": ["base.html 包含导航栏和基础布局", "dashboard.html 显示任务进度统计", "浏览器访问 localhost:8899 可正常显示"],
    "passes": false
  },
  {
    "id": 13,
    "category": "ui",
    "description": "Web UI - 任务管理页面",
    "steps": ["tasks.html 支持上传 ASIN 文件 (Excel/CSV)", "显示历史批次列表", "可查看每个批次的详细进度"],
    "passes": false
  },
  {
    "id": 14,
    "category": "ui",
    "description": "Web UI - 结果查看页面",
    "steps": ["results.html 分页显示采集结果", "支持按 ASIN/标题搜索", "支持按批次筛选"],
    "passes": false
  },
  {
    "id": 15,
    "category": "ui",
    "description": "Web UI - 设置页面",
    "steps": ["settings.html 支持配置邮编", "支持配置代理 API", "支持配置并发数"],
    "passes": false
  },
  {
    "id": 16,
    "category": "feature",
    "description": "数据导出 (Excel/CSV)",
    "steps": ["GET /api/export/excel 下载 Excel 文件", "GET /api/export/csv 下载 CSV 文件", "导出字段与原版一致, 含中文表头"],
    "passes": false
  },
  {
    "id": 17,
    "category": "feature",
    "description": "断点续传",
    "steps": ["Worker 重启后从 pending/failed 状态继续", "processing 超过 5 分钟自动回退为 pending", "任务状态正确更新"],
    "passes": false
  },
  {
    "id": 18,
    "category": "feature",
    "description": "Worker 监控",
    "steps": ["Web UI 显示在线 worker 列表", "显示每个 worker 的采集速度", "worker 离线后自动标记"],
    "passes": false
  }
]
